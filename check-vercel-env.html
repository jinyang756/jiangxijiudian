<!DOCTYPE html>
<html>
<head>
    <title>Vercel 环境变量检查</title>
</head>
<body>
    <h1>Vercel 环境变量检查</h1>
    <div id="result"></div>

    <script>
        // 检查环境变量
        const resultDiv = document.getElementById('result');
        
        // 模拟 Vite 环境变量检查
        const envVars = {
            'VITE_APP_DB_URL': import.meta.env.VITE_APP_DB_URL,
            'VITE_APP_DB_POSTGRES_PASSWORD': import.meta.env.VITE_APP_DB_POSTGRES_PASSWORD,
            'MODE': import.meta.env.MODE,
            'DEV': import.meta.env.DEV,
            'PROD': import.meta.env.PROD
        };
        
        let resultHTML = '<h2>环境变量状态:</h2><ul>';
        
        for (const [key, value] of Object.entries(envVars)) {
            if (key === 'VITE_APP_DB_POSTGRES_PASSWORD' && value) {
                resultHTML += `<li><strong>${key}:</strong> ${value.substring(0, 20)}... (已设置)</li>`;
            } else {
                resultHTML += `<li><strong>${key}:</strong> ${value || '未设置'}</li>`;
            }
        }
        
        resultHTML += '</ul>';
        
        // 检查 Supabase 客户端配置
        if (envVars['VITE_APP_DB_URL'] && envVars['VITE_APP_DB_POSTGRES_PASSWORD']) {
            resultHTML += '<p style="color: green;">✅ 环境变量配置正确</p>';
        } else {
            resultHTML += '<p style="color: red;">❌ 环境变量未正确设置</p>';
            resultHTML += '<p>请在 Vercel 项目设置中添加以下环境变量:</p>';
            resultHTML += '<pre>VITE_APP_DB_URL=https://kdlhyzsihflwkwumxzfw.supabase.co\nVITE_APP_DB_POSTGRES_PASSWORD=您的Supabase Anon Key</pre>';
        }
        
        resultDiv.innerHTML = resultHTML;
    </script>
</body>
</html>